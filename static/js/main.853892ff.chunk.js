(this.webpackJsonptodo16v2=this.webpackJsonptodo16v2||[]).push([[0],{120:function(t,e,a){},121:function(t,e,a){},146:function(t,e,a){},147:function(t,e,a){},148:function(t,e,a){"use strict";a.r(e);var n,i,s,c=a(0),o=a.n(c),d=a(32),r=a.n(d),l=(a(120),function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,212)).then((function(e){var a=e.getCLS,n=e.getFID,i=e.getFCP,s=e.getLCP,c=e.getTTFB;a(t),n(t),i(t),s(t),c(t)}))}),u=(a(121),a(19)),j=a(23),b=a(95),f=a.n(b).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"ed4fceee-142b-4594-8fa5-aac94446b199"}}),O=function(){return f.get("todo-lists")},h=function(t){return f.post("todo-lists",{title:t})},m=function(t){return f.delete("todo-lists/".concat(t))},p=function(t,e){return f.put("todo-lists/".concat(t),{title:e})},x=function(t){return f.get("todo-lists/".concat(t,"/tasks"))},v=function(t,e){return f.delete("todo-lists/".concat(t,"/tasks/").concat(e))},g=function(t,e){return f.post("todo-lists/".concat(t,"/tasks"),{title:e})},k=function(t,e,a){return f.put("todo-lists/".concat(t,"/tasks/").concat(e),a)},C=function(t,e,a,n){return f.post("auth/login",{email:t,password:e,rememberMe:a,captcha:n})},y=function(){return f.delete("auth/login")},I=function(){return f.get("auth/me")};!function(t){t[t.success=0]="success",t[t.failed=1]="failed",t[t.captcha=10]="captcha"}(n||(n={})),function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(i||(i={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(s||(s={}));var T=a(34),A=Object(T.b)({name:"counter",initialState:{status:"idle",error:null,isInitialized:!1},reducers:{setAppErrorAC:function(t,e){t.error=e.payload},setAppStatusAC:function(t,e){t.status=e.payload},setIsInitializedAC:function(t,e){t.isInitialized=e.payload}}}),w=A.reducer,S=A.actions.setAppErrorAC,N=A.actions.setAppStatusAC,F=A.actions.setIsInitializedAC,L=function(t,e){t.messages.length?e(S(t.messages[0])):e(S("Some error occurred")),e(N("failed"))},E=function(t,e){e(S(t.message?t.message:"Some error occurred")),e(N("failed"))},P=Object(T.b)({name:"todolist",initialState:[],reducers:{removeTodolistAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload}));-1!==a&&t.splice(a,1)},addTodolistAC:function(t,e){t.unshift(Object(j.a)(Object(j.a)({},e.payload),{},{filter:"all"}))},changeTodolistTitleAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todolistId}));-1!==a&&(t[a].title=e.payload.title)},changeTodolistFilterAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todolistId}));-1!==a&&(t[a].filter=e.payload.filter)},changeTodolistEntityStatusAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todolistId}));-1!==a&&(t[a].entityStatus=e.payload.status)},setTodolistsAC:function(t,e){return e.payload.map((function(t){return Object(j.a)(Object(j.a)({},t),{},{filter:"all",entityStatus:"idle"})}))}}}),D=P.reducer,M=P.actions.removeTodolistAC,z=P.actions.addTodolistAC,q=P.actions.changeTodolistTitleAC,R=P.actions.changeTodolistFilterAC,B=P.actions.changeTodolistEntityStatusAC,H=P.actions.setTodolistsAC,U=Object(T.b)({name:"tasks",initialState:{},reducers:{removeTaskAC:function(t,e){var a=t[e.payload.todolistId],n=a.findIndex((function(t){return t.id===e.payload.taskId}));-1!==n&&a.splice(n,1)},addTaskAC:function(t,e){t[e.payload.todolistId].unshift(e.payload.task)},updateTaskAC:function(t,e){var a=t[e.payload.todolistId],n=a.findIndex((function(t){return t.id===e.payload.taskId}));-1!==n&&(a[n]=Object(j.a)(Object(j.a)({},a[n]),e.payload.model))},setTasksAC:function(t,e){t[e.payload.todolistId]=e.payload.tasks},updateEntityStatus:function(t,e){var a=t[e.payload.todolistId],n=a.findIndex((function(t){return t.id===e.payload.taskId}));1!==n&&(a[n].entityStatus=e.payload.value)}},extraReducers:function(t){t.addCase(z,(function(t,e){t[e.payload.id]=[]})),t.addCase(M,(function(t,e){delete t[e.payload]})),t.addCase(H,(function(t,e){e.payload.forEach((function(e){t[e.id]=[]}))}))}}),Z=U.reducer,J=U.actions.removeTaskAC,K=U.actions.addTaskAC,_=U.actions.updateTaskAC,G=U.actions.setTasksAC,V=U.actions.updateEntityStatus,Y=function(t,e,a){return function(n,i){var s=i().tasks[a].find((function(e){return e.id===t}));if(s){var c=Object(j.a)({deadline:s.deadline,description:s.description,priority:s.priority,startDate:s.startDate,title:s.title,status:s.status},e);k(a,t,c).then((function(i){if(0===i.data.resultCode){var s=_({taskId:t,model:e,todolistId:a});n(s)}else L(i.data,n)})).catch((function(t){E(t,n)}))}else console.warn("task not found in the state")}},$=a(203),Q=a(210),W=a(13),X=a(195),tt=a(204),et=a(191),at=a(1),nt=o.a.memo((function(t){var e=t.addItem,a=t.disabled,n=void 0!==a&&a,i=Object(c.useState)(""),s=Object(W.a)(i,2),o=s[0],d=s[1],r=Object(c.useState)(null),l=Object(W.a)(r,2),u=l[0],j=l[1],b=function(){""!==o.trim()?(e(o),d("")):j("Title is required")};return Object(at.jsxs)("div",{children:[Object(at.jsx)(X.a,{variant:"outlined",disabled:n,error:!!u,value:o,onChange:function(t){d(t.currentTarget.value)},onKeyPress:function(t){null!==u&&j(null),13===t.charCode&&b()},label:"Title",helperText:u}),Object(at.jsx)(tt.a,{color:"primary",onClick:b,disabled:n,children:Object(at.jsx)(et.a,{})})]})})),it=a(102),st=o.a.memo((function(t){var e=Object(c.useState)(!1),a=Object(W.a)(e,2),n=a[0],i=a[1],s=Object(c.useState)(t.value),o=Object(W.a)(s,2),d=o[0],r=o[1];return n?Object(at.jsx)(X.a,{value:d,onChange:function(t){r(t.currentTarget.value)},autoFocus:!0,onBlur:function(){i(!1),t.onChange(d)}}):Object(at.jsx)("span",{onDoubleClick:function(){i(!0),r(t.value)},children:t.value})})),ct=a(205),ot=a(192),dt=a(197),rt=o.a.memo((function(t){var e=Object(c.useCallback)((function(){return t.removeTask(t.task.id,t.todolistId)}),[t.task.id,t.todolistId]),a=Object(c.useCallback)((function(e){var a=e.currentTarget.checked;t.changeTaskStatus(t.task.id,a?i.Completed:i.New,t.todolistId)}),[t.task.id,t.todolistId]),n=Object(c.useCallback)((function(e){t.changeTaskTitle(t.task.id,e,t.todolistId)}),[t.task.id,t.todolistId]);return Object(at.jsxs)("div",{className:t.task.status===i.Completed?"is-done":"",children:[Object(at.jsx)(dt.a,{checked:t.task.status===i.Completed,color:"primary",onChange:a,disabled:"loading"===t.entityStatus}),Object(at.jsx)(st,{value:t.task.title,onChange:n}),Object(at.jsx)(tt.a,{onClick:e,disabled:"loading"===t.entityStatus,children:Object(at.jsx)(ot.a,{})})]},t.task.id)})),lt=o.a.memo((function(t){t.demo;var e=Object(it.a)(t,["demo"]),a=e.tasks?e.tasks:[],n=Object(u.b)();Object(c.useEffect)((function(){var t,a=(t=e.todolist.id,function(e){e(N("loading")),x(t).then((function(a){var n=a.data.items;e(G({tasks:n,todolistId:t})),e(N("succeeded"))}))});n(a)}),[]);var s=Object(c.useCallback)((function(t){e.addTask(t,e.todolist.id)}),[e.addTask,e.todolist.id]),o=Object(c.useCallback)((function(t){e.changeTodolistTitle(e.todolist.id,t)}),[e.todolist.id,e.changeTodolistTitle]),d=Object(c.useCallback)((function(){return e.changeFilter("all",e.todolist.id)}),[e.todolist.id,e.changeFilter]),r=Object(c.useCallback)((function(){return e.changeFilter("active",e.todolist.id)}),[e.todolist.id,e.changeFilter]),l=Object(c.useCallback)((function(){return e.changeFilter("completed",e.todolist.id)}),[e.todolist.id,e.changeFilter]);return"active"===e.todolist.filter&&(a=e.tasks.filter((function(t){return t.status===i.New}))),"completed"===e.todolist.filter&&(a=e.tasks.filter((function(t){return t.status===i.Completed}))),Object(at.jsxs)("div",{children:[Object(at.jsxs)("h3",{children:[Object(at.jsx)(st,{value:e.todolist.title,onChange:o}),Object(at.jsx)(tt.a,{onClick:function(){e.removeTodolist(e.todolist.id)},disabled:"loading"===e.todolist.entityStatus,children:Object(at.jsx)(ot.a,{})})]}),Object(at.jsx)(nt,{addItem:s,disabled:"loading"===e.todolist.entityStatus}),Object(at.jsx)("div",{children:a.map((function(t){return Object(at.jsx)(rt,{task:t,entityStatus:t.entityStatus,todolistId:e.todolist.id,removeTask:e.removeTask,changeTaskTitle:e.changeTaskTitle,changeTaskStatus:e.changeTaskStatus},t.id)}))}),Object(at.jsxs)("div",{style:{paddingTop:"10px"},children:[Object(at.jsx)(ct.a,{variant:"all"===e.todolist.filter?"outlined":"text",onClick:d,color:"inherit",children:"All"}),Object(at.jsx)(ct.a,{variant:"active"===e.todolist.filter?"outlined":"text",onClick:r,color:"primary",children:"Active"}),Object(at.jsx)(ct.a,{variant:"completed"===e.todolist.filter?"outlined":"text",onClick:l,color:"secondary",children:"Completed"})]})]})})),ut=a(14),jt=function(t){var e=t.demo,a=void 0!==e&&e,n=Object(u.c)((function(t){return t.todolists})),i=Object(u.c)((function(t){return t.tasks})),s=Object(u.b)(),o=Object(u.c)((function(t){return t.auth.isLoggedIn}));Object(c.useEffect)((function(){if(!a&&o){var t=function(t){t(N("loading")),O().then((function(e){t(H(e.data)),t(N("succeeded"))})).catch((function(e){E(e,t)}))};s(t)}}),[]);var d=Object(c.useCallback)((function(t,e){var a=function(t,e){return function(a){a(N("loading")),a(V({taskId:t,todolistId:e,value:"loading"})),v(e,t).then((function(n){if(0===n.data.resultCode){a(N("succeeded"));var i=J({taskId:t,todolistId:e});a(i)}else L(n.data,a)})).catch((function(t){E(t,a)}))}}(t,e);s(a)}),[]),r=Object(c.useCallback)((function(t,e){var a=function(t,e){return function(a){a(N("loading")),g(e,t).then((function(t){if(0===t.data.resultCode){var n=t.data.data.item,i=K({task:n,todolistId:e});a(i),a(N("succeeded"))}else L(t.data,a)})).catch((function(t){E(t,a)}))}}(t,e);s(a)}),[]),l=Object(c.useCallback)((function(t,e,a){var n=Y(t,{status:e},a);s(n)}),[]),j=Object(c.useCallback)((function(t,e,a){var n=Y(t,{title:e},a);s(n)}),[]),b=Object(c.useCallback)((function(t,e){var a=R({todolistId:e,filter:t});s(a)}),[]),f=Object(c.useCallback)((function(t){var e,a=(e=t,function(t){t(N("loading")),t(B({todolistId:e,status:"loading"})),m(e).then((function(a){t(M(e)),t(N("succeeded"))}))});s(a)}),[]),x=Object(c.useCallback)((function(t,e){var a=function(t,e){return function(a){p(t,e).then((function(n){a(q({todolistId:t,title:e}))}))}}(t,e);s(a)}),[]),k=Object(c.useCallback)((function(t){var e=function(t){return function(e){e(N("loading")),h(t).then((function(t){e(z(t.data.data.item)),e(N("succeeded"))}))}}(t);s(e)}),[s]);return o?Object(at.jsxs)(at.Fragment,{children:[Object(at.jsx)($.a,{container:!0,style:{padding:"20px"},children:Object(at.jsx)(nt,{addItem:k})}),Object(at.jsx)($.a,{container:!0,spacing:3,children:n.map((function(t){var e=i[t.id];return Object(at.jsx)($.a,{item:!0,children:Object(at.jsx)(Q.a,{style:{padding:"10px"},children:Object(at.jsx)(lt,{todolist:t,tasks:e,removeTask:d,changeFilter:b,addTask:r,changeTaskStatus:l,removeTodolist:f,changeTaskTitle:j,changeTodolistTitle:x,demo:a})})},t.id)}))})]}):Object(at.jsx)(ut.a,{to:"login"})},bt=a(206),ft=a(207),Ot=a(209),ht=a(208),mt=a(194),pt=a(199),xt=a(198),vt=o.a.forwardRef((function(t,e){return Object(at.jsx)(xt.a,Object(j.a)({elevation:6,ref:e,variant:"filled"},t))}));function gt(){var t=Object(u.c)((function(t){return t.app.error})),e=Object(u.b)(),a=function(t,a){"clickaway"!==a&&e(S(null))};return Object(at.jsx)(pt.a,{open:null!==t,autoHideDuration:6e3,onClose:a,children:Object(at.jsx)(vt,{onClose:a,severity:"error",sx:{width:"100%"},children:t})})}var kt=a(200),Ct=a(201),yt=a(211),It=a(189),Tt=a(101),At=Object(T.b)({name:"auth",initialState:{isLoggedIn:!1},reducers:{setIsLoggedInAC:function(t,e){t.isLoggedIn=e.payload.value}}}),wt=At.reducer,St=At.actions.setIsLoggedInAC,Nt=function(){var t=Object(u.c)((function(t){return t.auth.isLoggedIn})),e=Object(u.b)(),a=Object(Tt.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(t){var e={};return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Invalid email address"):e.email="Email is required!",t.password?t.password.length<3&&(e.password="Password should contain at least 3 characters."):e.password="Password is required!",e},onSubmit:function(t){var i;e((i=t,function(t){var e=i.email,a=i.password,s=i.rememberMe,c=i.captcha;t(N("loading")),C(e,a,s,c).then((function(e){e.data.resultCode===n.success?(t(St({value:!0})),t(N("succeeded"))):L(e.data,t)})).catch((function(e){E(e,t)}))})),a.resetForm()}});return t?Object(at.jsx)(ut.a,{to:"/"}):Object(at.jsx)($.a,{container:!0,justifyContent:"center",children:Object(at.jsx)($.a,{item:!0,justifyContent:"center",children:Object(at.jsxs)(kt.a,{children:[Object(at.jsxs)(It.a,{children:[Object(at.jsxs)("p",{children:["To log in get registered",Object(at.jsx)("a",{href:"https://social-network.samuraijs.com/",target:"_blank",children:" here"})]}),Object(at.jsxs)("p",{children:["Email: ",Object(at.jsx)("strong",{children:"free@samuraijs.com"})]}),Object(at.jsxs)("p",{children:["Password: ",Object(at.jsx)("strong",{children:"free"})]})]}),Object(at.jsx)("form",{onSubmit:a.handleSubmit,children:Object(at.jsxs)(yt.a,{children:[Object(at.jsx)(X.a,Object(j.a)({label:"Email",margin:"normal"},a.getFieldProps("email"))),a.touched.email&&a.errors.email&&Object(at.jsx)("div",{style:{color:"red"},children:a.errors.email}),Object(at.jsx)(X.a,Object(j.a)({type:"password",label:"Password",margin:"normal"},a.getFieldProps("password"))),a.touched.password&&a.errors.password&&Object(at.jsx)("div",{style:{color:"red"},children:a.errors.password}),Object(at.jsx)(Ct.a,{label:"Remember me",control:Object(at.jsx)(dt.a,Object(j.a)({},a.getFieldProps("rememberMe")))}),Object(at.jsx)(ct.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})})]})})})},Ft=(a(146),function(){return Object(at.jsx)("div",{id:"notfound",children:Object(at.jsxs)("div",{className:"notfound",children:[Object(at.jsxs)("div",{className:"notfound-404",children:[Object(at.jsx)("h3",{children:"Oops! Page not found"}),Object(at.jsxs)("h1",{children:[Object(at.jsx)("span",{children:"4"}),Object(at.jsx)("span",{children:"0"}),Object(at.jsx)("span",{children:"4"})]})]}),Object(at.jsx)("h2",{children:"we are sorry, but the page you requested was not found"})]})})}),Lt=(a(147),function(){return Object(at.jsxs)("div",{className:"loader",children:[Object(at.jsx)("div",{className:"dot",children:"L"}),Object(at.jsx)("div",{className:"dot",children:"O"}),Object(at.jsx)("div",{className:"dot",children:"A"}),Object(at.jsx)("div",{className:"dot",children:"D"}),Object(at.jsx)("div",{className:"dot",children:"I"}),Object(at.jsx)("div",{className:"dot",children:"N"}),Object(at.jsx)("div",{className:"dot",children:"G"}),Object(at.jsxs)("div",{className:"cogs",children:[Object(at.jsxs)("div",{className:"cog cog0",children:[Object(at.jsx)("div",{className:"bar"}),Object(at.jsx)("div",{className:"bar"}),Object(at.jsx)("div",{className:"bar"}),Object(at.jsx)("div",{className:"bar"})]}),Object(at.jsxs)("div",{className:"cog cog1",children:[Object(at.jsx)("div",{className:"bar"}),Object(at.jsx)("div",{className:"bar"}),Object(at.jsx)("div",{className:"bar"}),Object(at.jsx)("div",{className:"bar"})]}),Object(at.jsxs)("div",{className:"cog cog2",children:[Object(at.jsx)("div",{className:"bar"}),Object(at.jsx)("div",{className:"bar"}),Object(at.jsx)("div",{className:"bar"}),Object(at.jsx)("div",{className:"bar"})]})]})]})});var Et=function(t){var e=t.demo,a=void 0!==e&&e,n=Object(u.c)((function(t){return t.auth.isLoggedIn})),i=Object(u.c)((function(t){return t.app.isInitialized})),s=Object(u.c)((function(t){return t.app.status})),o=Object(u.b)();return Object(c.useEffect)((function(){o((function(t){I().then((function(e){0===e.data.resultCode?t(St({value:!0})):L(e.data,t)})).catch((function(e){E(e,t)})).finally((function(){t(F(!0))}))}))}),[]),i?Object(at.jsxs)("div",{className:"App",children:[Object(at.jsx)(gt,{}),Object(at.jsxs)(bt.a,{position:"static",children:[Object(at.jsxs)(ft.a,{children:[Object(at.jsx)(tt.a,{edge:"start",color:"inherit","aria-label":"menu",children:Object(at.jsx)(mt.a,{})}),n&&Object(at.jsx)(ct.a,{color:"inherit",onClick:function(){o((function(t){t(N("loading")),y().then((function(e){0===e.data.resultCode?(t(St({value:!1})),t(N("succeeded"))):L(e.data,t)})).catch((function(e){E(e,t)}))}))},children:"Log Out"})]}),"loading"===s&&Object(at.jsx)(ht.a,{})]}),Object(at.jsx)(Ot.a,{fixed:!0,children:Object(at.jsxs)(ut.d,{children:[Object(at.jsx)(ut.b,{path:"/",element:Object(at.jsx)(jt,{demo:a})}),Object(at.jsx)(ut.b,{path:"/login",element:Object(at.jsx)(Nt,{})}),Object(at.jsx)(ut.b,{path:"/404",element:Object(at.jsx)(Ft,{})}),Object(at.jsx)(ut.b,{path:"*",element:Object(at.jsx)(ut.a,{to:"/404"})})]})})]}):Object(at.jsx)(Lt,{})},Pt=a(100),Dt=a(99),Mt=Object(Pt.a)({tasks:Z,todolists:D,app:w,auth:wt}),zt=Object(T.a)({reducer:Mt,middleware:function(t){return t().prepend(Dt.a)}});window.store=zt;var qt=a(53);r.a.render(Object(at.jsx)(o.a.StrictMode,{children:Object(at.jsx)(u.a,{store:zt,children:Object(at.jsx)(qt.a,{children:Object(at.jsx)(Et,{})})})}),document.getElementById("root")),l()}},[[148,1,2]]]);
//# sourceMappingURL=main.853892ff.chunk.js.map